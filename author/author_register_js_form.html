<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <object style="width : 100%" data="header.html" type="text/html"></object> 
    
    <div class="container ">
        <div class="page-header "><h3>회원가입</h3></div>
        
        <form id="authorForm">
            <div class="form-group">
                <label for="name">이름</label>
                <input type="text" class = "form-control" id="name" name="name" placeholder="이름을 입력해주세요">
            </div>

            <div class="form-group">
                <label for="email">이메일</label><br>
                <input type="email" id = "email" class = "form-control" placeholder="내용을 입력해주세요">
            </div>

            <div class="form-group">
                <label for="password">비밀번호</label>
                <input type="password" class = "form-control" id="password" name="password" placeholder="이름을 입력해주세요">
            </div>

            <div class="form-group">
                <label for="role">사용자권한</label>
                
                <select name="role"id="role" class="form-select">
                    <option value="user">유저</option>
                    <option value="admin">관리자</option>
                </select>
            </div>

            <button type="submit" id="myButton" class="btn btn-primary ">가입</button>
        </form>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            document.getElementById("authorForm").addEventListener('submit',
                async function(event){
                    event.preventDefault();

                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const password =  document.getElementById('password').value;
                
                    const formData = new FormData();
                    formData.append('name', name)
                    formData.append('email', email);
                    formData.append('password', password);
                    try{
                        const response = await axios.post('http://localhost:8081/author/register2', formData);
                    } catch(e) {
                        console.log(e.message);
                    }
                    
                }
            );
        </script>
        
        
    </div>
</body>
</html>